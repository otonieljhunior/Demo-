-- create_demo_db.sql
DROP DATABASE IF EXISTS demo_db;
CREATE DATABASE demo_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE demo_db;

-- clientes
CREATE TABLE cliente (
  id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(255),
  email VARCHAR(255),
  telefone VARCHAR(255)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- produtos
CREATE TABLE produto (
  id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(255),
  preco DECIMAL(10,2),
  estoque INT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- pedidos
CREATE TABLE pedido (
  id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  descricao VARCHAR(255),
  valor_total DECIMAL(10,2),
  data DATE,
  cliente_id BIGINT NOT NULL,
  CONSTRAINT fk_pedido_cliente FOREIGN KEY (cliente_id) REFERENCES cliente(id) ON DELETE RESTRICT ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- tabela associativa pedido_produto (many-to-many)
CREATE TABLE pedido_produto (
  pedido_id BIGINT NOT NULL,
  produto_id BIGINT NOT NULL,
  PRIMARY KEY (pedido_id, produto_id),
  CONSTRAINT fk_pp_pedido FOREIGN KEY (pedido_id) REFERENCES pedido(id) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT fk_pp_produto FOREIGN KEY (produto_id) REFERENCES produto(id) ON DELETE RESTRICT ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



select *from cliente;
select *from pedido;
